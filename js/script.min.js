(()=>{"use strict";const e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}},t=document.querySelector("header"),o=document.querySelector(".header__menu"),r=document.querySelectorAll(".header__menu-link"),n=document.querySelector(".header__dropdown"),s=document.querySelector(".header__burger");r.forEach((t=>{t.addEventListener("click",(o=>{let r=t.nextElementSibling;if(r){if(o.preventDefault(),window.innerWidth>992&&e.any()){const e=document.querySelectorAll(".header__menu-item_hover");o.preventDefault(),e.forEach((e=>e.classList.remove("header__menu-item_hover"))),r&&t.closest(".header__menu-item").classList.add("header__menu-item_hover")}window.innerWidth<=992&&t.closest(".header__menu-item").classList.toggle("header__menu-item_open")}}))})),n.addEventListener("click",(e=>{const t=e.target;if(t.closest(".header__dropdown-head")&&t.closest(".header__dropdown").classList.toggle("header__dropdown_open"),t.closest(".header__dropdown-item")){const e=t.closest(".header__dropdown-item"),o={img:e.querySelector("img").getAttribute("src"),label:e.querySelector("span").dataset.value};document.querySelector(".header__dropdown-item_active").classList.remove("header__dropdown-item_active"),e.classList.add("header__dropdown-item_active");const r=document.querySelector(".header__dropdown-head");r.querySelector("img").setAttribute("src",o.img),r.querySelector("span").innerHTML=o.label,t.closest(".header__dropdown").classList.remove("header__dropdown_open")}})),s.addEventListener("click",(e=>{s.classList.contains("header__burger_open")?(document.querySelectorAll(".header__menu-item_open").forEach((e=>e.classList.remove("header__menu-item_open"))),t&&(t.style.paddingRight=""),document.body.classList.remove("body_lock")):function(){let e=window.innerWidth-document.documentElement.clientWidth;t&&e&&(t.style.paddingRight=e+"px"),document.body.classList.add("body_lock")}(),s.classList.toggle("header__burger_open"),o.classList.toggle("header__menu_open")}));const c=document.querySelector(".header");let a=0;window.handleScroll=function(){let e=window.pageYOffset;c.querySelector(".header__burger").classList.contains("header__burger_open")||(a<e&&e>70?c.classList.contains("header_hide")||(c.classList.add("header_hide"),c.classList.remove("header_show"),c.querySelector(".header__menu-item_hover")?.classList.remove("header__menu-item_hover"),c.querySelector(".header__dropdown_open")?.classList.remove("header__dropdown_open")):a>e&&(c.classList.contains("header_show")||(c.classList.remove("header_hide"),c.classList.add("header_show")),e<70&&c.classList.contains("header_show")&&c.classList.remove("header_show")),a=e)},window.addEventListener("scroll",handleScroll),window.pageYOffset>70&&c.classList.add("header_hide"),document.addEventListener("click",(function(e){const t=e.target;t.closest(".header__menu-item")||document.querySelectorAll(".header__menu-item_hover").forEach((e=>e.classList.remove("header__menu-item_hover"))),t.closest(".header__dropdown")||document.querySelector(".header__dropdown").classList.remove("header__dropdown_open")})),window.matchMedia("(max-width: 992px)").addEventListener("change",(e=>{e.matches||s.classList.contains("header__burger_open")&&(s.classList.remove("header__burger_open"),o.classList.remove("header__menu_open"),document.querySelectorAll(".header__menu-item_open").forEach((e=>e.classList.remove("header__menu-item_open"))))}));class i{breakpoint;mediaQuery;constructor(e){this.elem=e,this.paddingValue=window.innerWidth-this.elem.parentElement.offsetWidth}needInsert(){return Math.floor(this.elem.offsetWidth/(this.elem.parentElement.offsetWidth+this.paddingValue))<2}insertItems(){const e=Array.from(this.elem.children);for(let t=0;t<e.length;t++)this.elem.append(e[t].cloneNode(!0));this.elem.style.animationDuration=2*parseInt(getComputedStyle(this.elem).animationDuration)+"s"}updateValues(){this.breakpoint=this.elem.offsetWidth/2+.5,this.mediaQuery=window.matchMedia(`(min-width: ${this.breakpoint}px)`)}handleChangeMediaQuery=e=>{e.matches&&(this.needInsert()&&this.insertItems(),this.updateValues(),this.mediaQuery.addEventListener("change",this.handleChangeMediaQuery,{once:!0}))};init(){for(;this.needInsert();)this.insertItems();this.updateValues(),this.mediaQuery.addEventListener("change",this.handleChangeMediaQuery,{once:!0})}}const l=document.querySelectorAll(".contact-us-form__input"),d="contact-us-form__control",u=document.forms["contact-us-form"].querySelector(".contact-us-form__select"),_=u.querySelector(".select__label"),m=u.querySelector(".select__options-wrapper");function h(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}document.addEventListener("click",(function(e){const t=e.target;if(!t.closest(".contact-us-form__control")){let e=document.querySelector(".contact-us-form__control_focused");e&&e.classList.remove("contact-us-form__control_focused")}t.closest(".contact-us-form__select")||document.querySelector(".select_open")&&(document.querySelector(".select_open").classList.remove("select_open"),document.querySelector(".select__options-wrapper").style.height="")}));let p=!1;u.addEventListener("click",(e=>{if(e.target.closest(".select__head")&&!p&&(p=!0,u.classList.contains("select_open")?(u.classList.remove("select_open"),m.style.height=""):(u.classList.add("select_open"),m.style.height=m.scrollHeight+"px"),m.addEventListener("transitionend",(()=>p=!1))),e.target.closest(".select__option")){let t=u.querySelector(".select__option_selected"),o=e.target.closest(".select__option");t&&t.classList.remove("select__option_selected"),o.classList.add("select__option_selected"),u.querySelector("input").value=o.dataset.value,_.innerHTML=o.querySelector(".select__option-label").innerHTML,u.classList.add("select_selected"),setTimeout((()=>{u.classList.remove("select_open"),m.style.height=""}),200)}}));for(let e=0;e<l.length;e++){let t=l[e].closest("."+d);t.querySelector("button").addEventListener("click",(o=>{o.target.closest("form").classList.contains("contact-us-form_sending")||(t.className=d,l[e].value="",l[e].focus())})),l[e].addEventListener("input",(e=>{const o=e.target,r="contact-us-form__control_changed";t.classList.contains(d+"_error")&&t.classList.remove(d+"_error"),""!==o.value?!t.classList.contains(r)&&t.classList.add(r):t.classList.remove(r)})),l[e].addEventListener("change",(e=>{""!==e.target.value.trim()?t.classList.add("contact-us-form__control_filled"):t.classList.remove("contact-us-form__control_filled")})),l[e].addEventListener("focus",(e=>{let o=document.querySelector("."+d+"_focused");o&&o.classList.remove(d+"_focused"),t.classList.add("contact-us-form__control_focused")})),"email"===l[e].getAttribute("name")&&l[e].addEventListener("blur",(e=>{const t=e.target;""===t.value.trim()||h(t.value)||t.closest(".contact-us-form__control").classList.add("contact-us-form__control_error")}))}document.querySelectorAll("input[name='phone']").forEach((e=>{e.addEventListener("keypress",(e=>{const t=e.target.value.length;if(e.charCode<48||e.charCode>57||t>14)e.preventDefault();else switch(t){case 0:e.target.value="8 ";break;case 5:case 9:case 12:e.target.value+=" "}})),e.addEventListener("input",(e=>{2===e.target.value.length&&(e.target.value="")}))})),document.forms["contact-us-form"].elements.comments.addEventListener("input",(e=>{const t=e.target,o=t.previousElementSibling;o.value=t.value,t.offsetHeight!==o.scrollHeight&&(t.style.height=o.scrollHeight+"px")})),document.querySelector(".contact-us-form__file-input").addEventListener("change",(e=>{if(e.target.files[0].size>31457280)return void alert("Размер файла не должен превышать 30 MB");const t=e.target.closest(".contact-us-form__file");t.querySelector(".contact-us-form__file-doc span").innerHTML=e.target.files[0].name,t.classList.add("contact-us-form__file_attached"),t.querySelector(".contact-us-form__file-doc button").addEventListener("click",(()=>{e.target.value="",t.classList.remove("contact-us-form__file_attached")}),{once:!0})})),document.forms["contact-us-form"].addEventListener("submit",(e=>{e.preventDefault(),function(e){const t=e.querySelectorAll("[class$='__input_required']");let o=0;for(let e=0;e<t.length;e++)"name"===t[e].getAttribute("name")&&""===t[e].value&&(t[e].closest(".contact-us-form__control").classList.add("contact-us-form__control_error"),o++),"phone"===t[e].getAttribute("name")&&(""===t[e].value.trim()||t[e].value.length<15)&&(t[e].closest(".contact-us-form__control").classList.add("contact-us-form__control_error"),o++);const r=e.querySelector("input[type='email']");""===r.value.trim()||h(r.value)||(r.closest(".contact-us-form__control").classList.add("contact-us-form__control_error"),o++),o?console.log("Fill req fields"):(e.classList.add("contact-us-form_sending"),e.querySelectorAll("input, textarea").forEach((e=>e.disabled=!0)),e.querySelector(".contact-us-form__button").disabled=!0,setTimeout((()=>{e.reset(),e.classList.remove("contact-us-form_sending"),e.classList.add("contact-us-form_sent"),e.querySelectorAll(".contact-us-form__control").forEach((e=>{let t=e.classList.contains("full-width")?" contact-us-form__control_full-width":"";e.className="contact-us-form__control"+t})),e.querySelectorAll("input, textarea").forEach((e=>e.disabled=!1)),e.querySelector(".contact-us-form__button").disabled=!1}),1500))}(e.target)}));const g=document.querySelectorAll(".running-line__wrapper");for(let e=0;e<g.length;e++)new i(g[e]).init();let f=document.querySelector(".equipment-section"),y=document.querySelector(".equipment-section__slider .swiper-wrapper"),v=document.querySelectorAll(".equipment-section__slider .swiper-slide");if(gsap.registerPlugin(ScrollTrigger),gsap.config({nullTargetWarn:!1}),f){window.matchMedia("(max-width: 1100px)").matches&&function(){let e=null,t=new IntersectionObserver((function(t){t.forEach((t=>{t.isIntersecting&&e!==t.target&&(e?.pause(),e=t.target,e.currentTime=0,e.play())}))}),{rootMargin:"0px",threshold:.3});document.querySelectorAll(".equipment-section .equipment-item video").forEach((e=>{t.observe(e)}))}();let e=gsap.to(y,{x:function(){let e=document.querySelector(".equipment-section__slider .swiper").offsetWidth,t=0;for(let e=0;e<v.length;e++)t+=v[e].offsetWidth;return t+=16*(v.length-1),e-t},duration:3,ease:"none"});ScrollTrigger.create({trigger:".equipment-section",start:()=>{let e=getComputedStyle(document.documentElement).fontSize;return document.querySelector(".equipment-section").offsetHeight<window.innerHeight?`top+=${parseFloat(e)}  top`:"bottom bottom"},ease:"none",pin:!0,animation:e,scrub:1,invalidateOnRefresh:!0}),window.addEventListener("resize",(()=>ScrollTrigger.refresh()))}if(new SplitType(".section__title",{types:"words, chars",tagName:"span"}),gsap.utils.toArray(".section__title").forEach((e=>{let t=e.querySelectorAll(".char");gsap.from(t,{scrollTrigger:{trigger:e,start:"top 80%"},yPercent:115,duration:.5,ease:"power1.out",stagger:{amount:.4}})})),gsap.utils.toArray(".section__info").forEach((e=>{let t=e.children;gsap.from(t,{scrollTrigger:{trigger:e,start:"top 80%"},yPercent:30,opacity:0,stagger:{amount:.4}})})),new SplitType(".footer__contact-us-title",{types:"words, chars",tagName:"span"}),!window.location.pathname.includes("contacts")){ScrollTrigger.create({trigger:document.querySelector(".footer").previousElementSibling,start:document.querySelector(".footer").previousElementSibling.offsetHeight<window.innerHeight?"top top":"bottom bottom",pin:!0,pinSpacing:!1,scrub:1});let e=gsap.to(".footer__commercial",{marginBottom:()=>-document.querySelector(".footer__commercial").offsetHeight});ScrollTrigger.create({trigger:".footer__commercial",start:"top center",end:"top 10%",animation:e,scrub:1})}gsap.timeline({scrollTrigger:{trigger:".footer__contact-us",start:"top 80%"}}).from(".footer__contact-us-title .char",{yPercent:100,duration:.5,ease:"power1.out",stagger:{amount:.4}}).from(".footer__contact-us-desc",{yPercent:25,opacity:0,duration:.5,ease:"power1.out"},"<+0.25").from(".contact-us-form",{yPercent:10,opacity:0,duration:.5,ease:"power1.out",stagger:{amount:.4}},"<+0.3");let L=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${L}px`),window.addEventListener("resize",(()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}))})();
//# sourceMappingURL=script.min.js.map