(()=>{"use strict";function e(){o=new Swiper(".departments-section__department_active .swiper",{slidesPerView:1.2,spaceBetween:16,allowTouchMove:!1,breakpoints:{576:{slidesPerView:1.5},768:{slidesPerView:2},961:{slidesPerView:3},1341:{slidesPerView:4}}})}function t(){n?.kill(),a?.kill();let e=function(){let e=document.querySelector(".departments-section__department_active").offsetWidth,t=document.querySelectorAll(".departments-section__department_active .employee"),o=0;for(let e=0;e<t.length;e++)o+=t[e].offsetWidth;return o+=16*(t.length-1),e>=o?0:`+=${e-o}px`}();if(0===e){let e=s.offsetTop+s.offsetHeight+l.offsetHeight-window.innerHeight;return void(window.pageYOffset>=e&&window.scrollTo(0,e))}i?.kill();let t=gsap.to(".departments-section__department_active .swiper-wrapper",{x:e,duration:3,ease:"none"});n=ScrollTrigger.create({trigger:".departments-section",start:()=>{let e=getComputedStyle(document.documentElement).fontSize;return document.querySelector(".departments-section").offsetHeight<window.innerHeight?`top+=${parseFloat(e)}  top`:"bottom bottom"},ease:"none",pin:!0,animation:t,scrub:1,invalidateOnRefresh:!0}),i=gsap.to(".footer__commercial",{scrollTrigger:{trigger:".footer__commercial",start:"top center",end:"top 10%",scrub:1,markers:!0},marginBottom:()=>-document.querySelector(".footer__commercial").offsetHeight}),a=gsap.to(".departments-section .section__body",{y:.15*ScrollTrigger.maxScroll(window),ease:"none",scrollTrigger:{trigger:".footer",start:"top 75%",end:"max",invalidateOnRefresh:!0,scrub:0}})}let o,n,a,i;ymaps.ready((function(){function e(e){let t=`\n            <div class="balloon__content">\n                <h4 class="balloon__title">${e.title}</h4>\n                \n            <div class="balloon__img">\n                <img src="${e.image}" alt="">\n            </div>\n                \n            <div class="balloon__info"> \n                <div class="balloon__address">\n                    <span class="icon-map-pin"></span>\n                    <span>${e.address}</span>\n                </div>\n                <div class="balloon__time">\n                    <span class="icon-clock"></span>\n                    <span>${e.time}</span>\n                </div>\n                <div class="balloon__phone">\n                    <span class="icon-phone"> </span>\n                    <a href="tel:${e.phone}">${e["phone-mask"]} </a>\n                </div>\n                <div class="balloon__email">\n                    <span class="icon-email"></span>\n                    <a href="mailto:${e.email}">${e.email}</a>\n                </div>\n            </div>\n        \n                \n            <a \n                class="balloon__link link" \n                href="https://yandex.com/maps/?mode=routes&rtext=~${e.coord[0]}%2C${e.coord[1]}&rtt=auto"\n                target="_blank"\n            >Проложить маршрут</a>\n            </div>\n        `;document.getElementById("balloon").innerHTML=t}let t,o=new ymaps.Map("map",{center:[55.75,37.6],controls:[],zoom:12}),n=document.getElementById("map").dataset,a=ymaps.templateLayoutFactory.createClass(`\n        <div id="zoom-controls">\n            <button id='zoom-out' type='button'><img src='${n.zoomOutImage}'></button>\n            <button id='zoom-in' type='button'><img src='${n.zoomInImage}'></button>\n        </div>`,{build:function(){a.superclass.build.call(this),this.zoomInCallback=ymaps.util.bind(this.zoomIn,this),this.zoomOutCallback=ymaps.util.bind(this.zoomOut,this),document.getElementById("zoom-in").addEventListener("click",this.zoomInCallback),document.getElementById("zoom-out").addEventListener("click",this.zoomOutCallback)},clear:function(){document.getElementById("zoom-in").removeEventListener("click",this.zoomInCallback),document.getElementById("zoom-out").removeEventListener("click",this.zoomOutCallback),a.superclass.clear.call(this)},zoomIn:function(){let e=this.getData().control.getMap();e.setZoom(e.getZoom()+1,{checkZoomRange:!0,duration:300})},zoomOut:function(){let e=this.getData().control.getMap();e.setZoom(e.getZoom()-1,{checkZoomRange:!0,duration:300})}}),i=new ymaps.control.ZoomControl({options:{layout:a,position:{right:"2%",bottom:32}}});o.controls.add(i),(async()=>{setTimeout((()=>{t=JSON.parse('\n                [\n                    {\n                        "id": "1",\n                        "title": "Центральный офис",\n                        "image": "./images/contacts/balloon-image.png",\n                        "address": "Москва, ул. Палехская, д. 131, пом. 1, ком. 10",\n                        "time": "Пн-Пт: c 09:00 до 18:00",\n                        "email": "info@stellplus.com",\n                        "phone": "+74959970687",\n                        "phone-mask": "+7 (495) 997-06-87",\n                        "coord": [55.75, 37.50]\n                    },\n                    {\n                        "id": "2",\n                        "title": "Восточный офис",\n                        "image": "./images/contacts/balloon-image.png",\n                        "address": "Москва, ул. Палехская, д. 131, пом. 1, ком. 10",\n                        "time": "Пн-Пт: c 09:00 до 18:00",\n                        "email": "info@stellplus.com",\n                        "phone": "+74959970687",\n                        "phone-mask": "+7 (495) 997-06-87",\n                        "coord": [55.75, 37.71]\n                    },\n                    {\n                        "id": "3",\n                        "title": "Южный офис",\n                        "image": "./images/contacts/balloon-image.png",\n                        "address": "Москва, ул. Палехская, д. 131, пом. 1, ком. 10",\n                        "time": "Пн-Пт: c 09:00 до 18:00",\n                        "email": "info@stellplus.com",\n                        "phone": "+74959970687",\n                        "phone-mask": "+7 (495) 997-06-87",\n                        "coord": [55.70, 37.70]\n                    }\n                ]            \n            '),function(a){let i,s=new ymaps.GeoObjectCollection;for(var l=0;l<a.length;l++)s.add(new ymaps.Placemark(a[l].coord,{pinData:a[l]},{iconLayout:"default#image",iconImageHref:0===l?n.pinActiveImage:n.pinImage,iconImageSize:[60,60]}));o.geoObjects.add(s),s.events.add("click",(t=>{let a=t.get("target").properties.get("pinData");if(i===a.id)return;let s=ymaps.geoQuery(o.geoObjects);for(let e=0;e<s.getLength();e++)s.get(e).options.set("iconImageHref",n.pinImage);t.get("target").options.set("iconImageHref",n.pinActiveImage);const l=document.querySelector(".balloon");if(l.classList.contains("balloon_open")){let t=l.querySelector(".balloon__content");t.style.opacity="0",t.addEventListener("transitionend",(t=>{e(a),t.target.style.opacity=""}))}else l.classList.add("balloon_open");i=a.id})),e(t[0]),document.querySelector(".balloon").classList.add("balloon_open"),o.panTo(t[0].coord,{duration:150})}(t)}),2e3)})(),o.events.add("click",(()=>{let e=ymaps.geoQuery(o.geoObjects);for(let t=0;t<e.getLength();t++)e.get(t).options.set("iconImageHref",n.pinImage);document.getElementById("balloon").classList.remove("balloon_open")}));let s=!1,l=document.getElementsByTagName("body")[0];o.behaviors.disable(["scrollZoom"]),l.onkeydown=function(e){17!==e.keyCode||s||(s=!0,o.behaviors.enable(["scrollZoom"]))},l.onkeyup=function(e){17===e.keyCode&&(s=!1,o.behaviors.disable(["scrollZoom"]))}})),document.querySelectorAll(".departments-section__tab-button").forEach((n=>{n.addEventListener("click",(n=>{let a=n.target,i=a.dataset.department,s=document.querySelector(".departments-section__departments");document.querySelector(".departments-section__tab-button_active").classList.remove("departments-section__tab-button_active"),a.classList.add("departments-section__tab-button_active"),s.style.opacity="0",s.addEventListener("transitionend",(()=>{let n="departments-section__department_active";s.querySelector("."+n).classList.remove(n),s.querySelector(".departments-section__department_"+i).classList.add(n),o.destroy(),e(),t(),s.style.opacity=""}),{once:!0})}))}));const s=document.querySelector(".map-section"),l=document.querySelector(".departments-section");e(),ScrollTrigger.create({trigger:".map-section",start:e=>{let t=parseFloat(getComputedStyle(document.documentElement).fontSize);return e.offsetHeight<window.innerHeight?`${t}  top`:"bottom bottom"},pin:!0,pinSpacing:!1}),gsap.from(".departments-section__departments",{scrollTrigger:{trigger:".departments-section__departments",start:"top 80%"},yPercent:10,opacity:0,duration:.6}),t()})();
//# sourceMappingURL=contacts.min.js.map